name: Run On PR against main

on:
    pull_request:
        branches:
            - main

jobs:
    setup-and-test:
        runs-on: ubuntu-latest
        steps:
        - name: checkout code
          uses: actions/checkout@v4
          with:
            fetch-depth: 0
        - name: Build schema
          uses: ./.github/actions/build-schema
        - name: Setup python, Lint Code and unit tests
          uses: ./.github/actions/setup_lint_and_test
        - name: Integration Tests
          uses: ./.github/actions/integration_tests
